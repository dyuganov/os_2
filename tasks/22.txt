22. Обедающие философы 2

Решите задачу упр. 10 при помощи атомарного захвата вилок. 
Когда философ может взять одну вилку, но не может взять другую, 
он должен положить вилку на стол и ждать, пока освободятся обе вилки.

Рекомендация: создайте еще мутекс forks и условную переменную. 
При попытке взять вилку философ должен захватывать forks и проверять 
доступность обоих вилок при помощи pthread_trylock(3C). Если одна 
из вилок недоступна, философ должен освободить вторую вилку 
(если он успел ее захватить) и заснуть на условной переменной. 
Освобождая вилки, философ должен оповещать остальных философов 
об этом при помощи условной переменной. Тщательно продумайте процедуру 
захвата и освобождения мутексов, чтобы избежать ошибок потерянного пробуждения.
